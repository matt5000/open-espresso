<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 400" width="700" height="400">
  <style>
    text { font-family: 'Source Sans 3', sans-serif; }
    .mono { font-family: 'Source Code Pro', monospace; }
  </style>

  <!-- Background -->
  <rect width="700" height="400" fill="#f8fafc" rx="4"/>

  <!-- Title -->
  <text x="350" y="28" text-anchor="middle" fill="#0f172a" font-size="16" font-weight="bold">New Architecture: Single ESP32-S3-WROOM-1</text>

  <!-- Main MCU box -->
  <rect x="30" y="42" width="640" height="200" rx="8" fill="white" stroke="#334155" stroke-width="2"/>
  <text x="350" y="64" text-anchor="middle" fill="#0f172a" font-size="14" font-weight="bold">ESP32-S3-WROOM-1 (Dual-Core Xtensa LX7)</text>
  <line x1="50" y1="72" x2="650" y2="72" stroke="#e2e8f0" stroke-width="1"/>

  <!-- Core 0 box -->
  <rect x="50" y="82" width="290" height="148" rx="6" fill="#dbeafe" stroke="#1e40af" stroke-width="2"/>
  <text x="195" y="102" text-anchor="middle" fill="#1e40af" font-size="13" font-weight="bold">Core 0 (Real-Time)</text>
  <line x1="70" y1="110" x2="320" y2="110" stroke="#93c5fd" stroke-width="1"/>
  <text x="70" y="130" fill="#1e40af" font-size="12">PID loop</text>
  <text x="70" y="150" fill="#1e40af" font-size="12">Dimmer timing</text>
  <text x="70" y="170" fill="#1e40af" font-size="12">Sensor polling</text>
  <text x="70" y="190" fill="#1e40af" font-size="12">Safety watchdog</text>

  <!-- Safety indicator -->
  <rect x="195" y="173" width="130" height="24" rx="4" fill="#fee2e2" stroke="#dc2626" stroke-width="1.5"/>
  <text x="260" y="190" text-anchor="middle" fill="#991b1b" font-size="11" font-weight="bold">HW Watchdog</text>

  <!-- Core 1 box -->
  <rect x="360" y="82" width="290" height="148" rx="6" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="505" y="102" text-anchor="middle" fill="#0f172a" font-size="13" font-weight="bold">Core 1 (Application)</text>
  <line x1="380" y1="110" x2="630" y2="110" stroke="#e2e8f0" stroke-width="1"/>
  <text x="380" y="130" fill="#0f172a" font-size="12">WiFi / BLE</text>
  <text x="380" y="150" fill="#0f172a" font-size="12">Display (LVGL)</text>
  <text x="380" y="170" fill="#0f172a" font-size="12">Web server</text>
  <text x="380" y="190" fill="#0f172a" font-size="12">OTA updates</text>

  <!-- Peripherals section -->
  <text x="350" y="270" text-anchor="middle" fill="#0f172a" font-size="14" font-weight="bold">Peripherals</text>
  <line x1="50" y1="278" x2="650" y2="278" stroke="#e2e8f0" stroke-width="1"/>

  <!-- Peripheral boxes row 1 -->
  <rect x="30" y="288" width="145" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="103" y="301" text-anchor="middle" class="mono" fill="#64748b" font-size="10">SPI</text>
  <text x="103" y="316" text-anchor="middle" fill="#0f172a" font-size="11">MAX31855</text>

  <rect x="185" y="288" width="145" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="258" y="301" text-anchor="middle" class="mono" fill="#64748b" font-size="10">I2C</text>
  <text x="258" y="316" text-anchor="middle" fill="#0f172a" font-size="11">ADS1115</text>

  <rect x="340" y="288" width="155" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="418" y="301" text-anchor="middle" class="mono" fill="#64748b" font-size="10">GPIO</text>
  <text x="418" y="316" text-anchor="middle" fill="#0f172a" font-size="11">Dimmer ZC + Triac</text>

  <rect x="505" y="288" width="165" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="588" y="301" text-anchor="middle" class="mono" fill="#64748b" font-size="10">GPIO</text>
  <text x="588" y="316" text-anchor="middle" fill="#0f172a" font-size="11">SSR (Boiler)</text>

  <!-- Peripheral boxes row 2 -->
  <rect x="30" y="334" width="145" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="103" y="347" text-anchor="middle" class="mono" fill="#64748b" font-size="10">GPIO</text>
  <text x="103" y="362" text-anchor="middle" fill="#0f172a" font-size="11">Solenoid</text>

  <rect x="185" y="334" width="145" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="258" y="347" text-anchor="middle" class="mono" fill="#64748b" font-size="10">GPIO ISR</text>
  <text x="258" y="362" text-anchor="middle" fill="#0f172a" font-size="11">Flow sensor</text>

  <rect x="340" y="334" width="155" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="418" y="347" text-anchor="middle" class="mono" fill="#64748b" font-size="10">BLE</text>
  <text x="418" y="362" text-anchor="middle" fill="#0f172a" font-size="11">Scales</text>

  <rect x="505" y="334" width="165" height="36" rx="4" fill="white" stroke="#334155" stroke-width="1.5"/>
  <text x="588" y="347" text-anchor="middle" class="mono" fill="#64748b" font-size="10">SPI / I2C</text>
  <text x="588" y="362" text-anchor="middle" fill="#0f172a" font-size="11">ILI9341 + CST816</text>
</svg>
